<html lang="ja">
<head>
<meta charset="UTF-8">
<title>≡0x0)</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=0">
<style type="text/css"><!--

body{color:white;background-color:black;width:100%;margin:0 auto;}
*{-webkit-appearance:none;font:13px sans-serif;border-radius:0;}
#cn{width:80%;margin:0 auto;}
textarea{color:white;background-color:#212121;line-height:1.25;letter-spacing:1px;width:100%;padding:3px 5px;resize:vertical;line-break:anywhere;}
button{width:20%;height:26px;margin:0;padding:0;}
--></style>
<link rel="manifest" href="manifest.json">
</head><body ondblclick=";">
<form>
<textarea rows=12 cols=17 name="pr" id="pr" class="pr"></textarea>
<div id="cn"><button type=button onclick="a()">「</button><button type=button onclick="l()">←</button><button type=button onclick="r()">→</button><button type=button onclick="z()">」</button><button type=button onclick="v()">ｖ</button><button type=button onclick="si()">ほ</button><button type=button onclick="gi()">ひ</button></div>
</form>

<script>//<!--

function si() { //…………保存
	s = p.value;
	if(s == ""){
		alert("からぽ");
	}else{
		localStorage.setItem('pvalue',s);
		alert("いちほ");
	}
}

function gi() { //…………開く
	if (window.confirm("ひらく？")) {
		s = p.value;
		p.value = localStorage.getItem('pvalue');
		if(s == ""){
			alert("ひらいた");
		}else{
			localStorage.setItem('pvalue',s);
			alert("ひらいた&いちほ");
		}
	}
}

function a() { //…………文頭
	p.setSelectionRange(0,0);
	p.scrollTop = 0;
}

function l() { //…………左
	p.selectionStart--;
	p.selectionEnd--;
}

function r() { //…………右
	p.selectionStart++;
}

function z() { //…………文末
	s = p.value;
	s = s.length;
	p.setSelectionRange(s,s);
	p.scrollTop = p.scrollHeight;
}

function v() { //…………鳩
	s = p.value;
	q = p.selectionEnd;
	p.value = s.slice(0,q);
	p.value = p.value + "♡";
	p.value = p.value + s.slice(q);
	p.selectionStart = q + 1;
}

p = document.getElementById("pr");

// service workerの登録関係
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('service_worker.js').then(function(registration) {
    console.log('ServiceWorker registration successful with scope: ', registration.scope);
}).catch(function(err) {
    console.log('ServiceWorker registration failed: ', err);
});
}

//--></script>

</body>
</html>
